.row.top-buffer
    .col-lg-6.col-lg-offset-3
        ul.breadcrumb
            li Transformation Schemata
.row(ng-init="init()")
    .col-lg-6
        form(name="TransformationSchemaForm", role="form", id="TransformationSchemaForm")
            div.form-group
                label(for="name") Name
                input.form-control(type="text", data-ng-model="schema.name")
            div.form-group
                label Entity Type
                select.form-control(id="entities", ng-model="schema.customAttributes.entity.uuid",
                ng-options="entity.uuid as entity.name for entity in entity_types")
            div.form-group
                label Export
                input.form-control(id="export",type="checkbox",data-ng-model="schema.customAttributes.export")
            div.btn-group
                button.btn.btn-default(type="submit", ng-click="updateTransformationSchema(schema)") APPLY
                button.btn.btn-danger(type="submit", ng-click="deleteTransformationSchema(schema.id)", ng-disabled="!schema.id") DELETE
                button.btn.btn-default(type="submit", ng-click="cancel()") CANCEL
    .col-lg-6
        form(role="form")
            .form-group.col-sm-6
                //label OUT ATTRIBUTE NAME
                //input(type="text", ng-model="out_attribute_name")
            .btn-group.top-space
                button.btn.btn-info(type="submit", ng-if="!schema.customAttributes.export", ng-click="addSchemaItem(out_attribute_name)")
                    span.glyphicon.glyphicon-plus
                button.btn.btn-info(type="submit",ng-if="schema.customAttributes.export", ng-click="addSchemaItemExport(out_attribute_name)")
                    span.glyphicon.glyphicon-plus
.row.top-buffer
    .col-lg-4
        h5.text-center IN
    .col-lg-4
        h5.text-center CONVERTERS
    .col-lg-4
        h5.text-center OUT
.row.top-buffer(ng-repeat="item in transformation_schema", ng-if="!schema.customAttributes.export")
    hr
    .col-lg-4
        .row
            .col-sm-2
                .form-group.pull-right
                    a.pull-right.btn.btn-success.btn-xs(ng-click="addItemAttribute(item)")
                        span.glyphicon.glyphicon-plus
        .row.top-small-buffer(ng-repeat="attribute in item.in")
            .col-sm-10
                .input-group
                    select.form-control.input-sm(ng-model="attribute.uuid",
                    ng-options=" a.uuid as a.name for a in attributes")
                    span.input-group-addon.pointer-cursor
                        span.glyphicon.glyphicon-remove
    .col-lg-4
        .row
            .col-sm-1
                .form-group.pull-right
                    a.pull-right.btn.btn-success.btn-xs(ng-click="addItemConverter(item)")
                        span.glyphicon.glyphicon-plus
            .col-sm-2.col-sm-offset-7
        .row.top-small-buffer(ng-repeat="converter in item.converters")
            .col-sm-10
                .input-group
                    select.form-control.input-sm(ng-model="converter.id",
                    ng-options="c.id as c.name for c in converters")
                    span.input-group-addon.pointer-cursor
                        span.glyphicon.glyphicon-remove
                    span.input-group-addon.pointer-cursor
                        span.glyphicon.glyphicon-edit
            .col-sm-2
    .col-lg-3
        .row
            .col-sm-1
                .form-group.pull-right
                    a.pull-right.btn.btn-success.btn-xs(ng-click="copyUUID(item)")
                        span.glyphicon.glyphicon-edit
        .row
            .col-sm-11
                input.form-control(type="text",id="name", data-ng-model="item.out")
    .col-lg-1
        form(role="form")
            .form-group
                a.btn.btn-danger.btn-xs(ng-click="removeSchemaItem($index)")
                    span.glyphicon.glyphicon-remove

.row.top-buffer(ng-repeat="item in transformation_schema", ng-if="schema.customAttributes.export")
    hr
    .col-lg-3
        .row
            .col-sm-1
                .form-group.pull-right
                    a.pull-right.btn.btn-success.btn-xs(ng-click="copyUUID(item)")
                        span.glyphicon.glyphicon-edit
        .row
            .col-sm-11
                .row(ng-repeat="i in item.in")
                    input.form-control(type="text", data-ng-model="i.path")
    .col-lg-4
        .row
            .col-sm-1
                .form-group.pull-right
                    a.pull-right.btn.btn-success.btn-xs(ng-click="addItemConverter(item)")
                        span.glyphicon.glyphicon-plus
            .col-sm-2.col-sm-offset-7
        .row.top-small-buffer(ng-repeat="converter in item.converters")
            .col-sm-10
                .input-group
                    select.form-control.input-sm(ng-model="converter.id",
                    ng-options="c.id as c.name for c in converters")
                    span.input-group-addon.pointer-cursor
                        span.glyphicon.glyphicon-remove
                    span.input-group-addon.pointer-cursor
                        span.glyphicon.glyphicon-edit
            .col-sm-2
    .col-lg-4
        .row
            .col-sm-2
                .form-group.pull-right
                    a.pull-right.btn.btn-success.btn-xs(ng-click="addItemAttribute(item)")
                        span.glyphicon.glyphicon-plus
        .row
            .col-sm-10
                .input-group
                    input.form-control(type="text", data-ng-model="item.out.path")
                    span.input-group-addon.pointer-cursor PATH
        .row.top-small-buffer
            .col-sm-10
                .input-group
                    select.form-control.input-sm(ng-model="item.out.uuid",
                    ng-options=" a.uuid as a.name for a in attributes")
                    span.input-group-addon.pointer-cursor
                        span.glyphicon.glyphicon-remove
    .col-lg-1
        form(role="form")
            .form-group
                a.btn.btn-danger.btn-xs(ng-click="removeSchemaItem($index)")
                    span.glyphicon.glyphicon-remove


